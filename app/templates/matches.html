{% extends "material/base.html" %}
{% import "material/utils.html" as util %}

{% block title %}Roomii{% endblock %}


{% block content %}
<nav class="yellow darken-1" role="navigation">
	<div class = "nav-wrapper yellow darken-1">
		<a href = "/homepage" class = "brand-logo left">Roomii</a>   
		<ul class="hide-on-med-and-down right">               
            <li>    
                <div class="center row">
	    	      	<form class="col s12" id="reg-form" action="/searchUser" method="POST">
                    	<div class="row" id="topbarsearch">
                      		<div class="input-field col s6 s12 black-text">
                        		<i class="white-text material-icons prefix">search</i>
                        		<input type="text" placeholder="User NetID" id="netid" name="netid" class="black-text" >
                      		</div>
                     	</div>
                    </form>
                </div>         
            </li>                     
        </ul>
	</div>
</nav>


<div class="container blue lighten-4" style="height: 100%;">
	<div class="section">
		<div class="row">	
			<div class="col s12 m12 l12">
				<div id="profile-details" class="section" style="width: 100%;">
					<table id="myTable" class="striped" style="width: 100%;">
					</table>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	var table = document.getElementById("myTable");
	var i;
	var matchups = {{matchups | tojson}};
	var checkFriends = {{checkFriends | tojson}};
	for (i = 0; i < 20; i++) {
		var row = table.insertRow(table.rows.length);
		row.innerHTML = '<tr style="height: 100"></tr>';
		var blank = row.insertCell(0);
		var nameCell = row.insertCell(1);
		var emailCell = row.insertCell(2);
		var descriptionCell = row.insertCell(3);
		descriptionCell.innerHTML = '<td colspan="2"></td>';
		var buttonCell = row.insertCell(4);
		var nameText = "Name: ";
		var emailText = "Email: ";
		var descriptionText = "Description: ";
		var netid = matchups[i][0];
		nameText += matchups[i][1];
		nameText += " ";
		nameText += matchups[i][2];
		emailText += netid;
		emailText += "@duke.edu";
		var nameNode = document.createTextNode(nameText);
		var emailNode = document.createTextNode(emailText);
		var descriptionNode = document.createTextNode(descriptionText);
		var buttonText = '<form method=\"POST\" action=\"/matches\"><input type=\"submit\" name=\"addID\" id=\"addID\" value=\"'+ "Add Friend:" + netid +'\"></form>';
		if( checkFriends[i] ) {
			var buttonText = '<form method=\"POST\" action=\"/matches\"><input type=\"submit\" name=\"addID\" id=\"addID\" value=\"'+ "Visit Profile:" + netid +'\"></form>';
		}
		buttonCell.innerHTML = buttonText;
		nameCell.append(nameNode);
		emailCell.append(emailNode);
		descriptionCell.append(descriptionNode);
	}

	function requestFriend(recipient) {
		var reqForm = document.createElement("FORM");
		reqForm.innerHTML ='<form action="/matches"><input type="text" name="netid" value="{{recipient}}"><input type="submit" value="Submit"></form>';
		addFriend.appendChild(reqForm);
	}
	function visitPage(toVisit) {

	}
</script>
{% endblock %}








